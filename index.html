<!DOCTYPE html>

<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,
                   height=device-width,
                   initial-scale=1.0">
    <meta http-equiv="content-security-policy"
          content="default-src 'none';
                   script-src 'unsafe-inline';
                   style-src 'unsafe-inline';">
  </head>
  <body>
    <style>
      * {
        background-color: #000000;
        box-sizing: border-box;
      }

      input {
        background-color: #505050;
        border: 2px solid #707070;

        color: #d0d0d0;
        font-size: 1.1em;
        font-style: normal;
        font-family: "Times New Roman", Times, serif;
      }

      button {
        background-color: #505050;
        border: 2px solid #707070;
        color: #d0d0d0;
        font-size: 1.1em;
        font-style: normal;
        font-family: "Times New Roman", Times, serif;
      }

      button:hover {
        background-color: #303070;
        border: 2px solid #707070;
      }

      button:disabled {
        background-color: #000000;
        border: 2px solid #707070;
      }

      div, ul, li {
        color: #d0d0d0;
        background-color: #505060;
        border-radius: 10px;

        width: 50%;
        margin: 2% 0 0 3%;
        padding: 10px;

        list-style-type: none;
      }

      li {
        width: 100%;
        margin: 0;
        padding: 0;
      }

      /*
      div#help {
        animation: alert 1s;
      }

      @keyframes alert {
        0%, 25% {
          background-color: #505099;
        }

        50% {
          background-color: initial;
        }

        75%, 100% {
          background-color: #505099;
        }
      }
      */
    </style>

    <input type="text">
    <button disabled>Reverse String</button>
    <div id="help">Insert text that is 2 characters or longer (not spaces) in to the text box above, extra spaces on
      the front/end will be trimed. Press 'Reverse String' to Reverse the text, the output is the text box.</div>
    <ul id="info">
      <li>Input: Invalid</li>
      <li>isPalindrome: Need Input</li>
    </ul>

    <script>
      function reverseString(string) {
        const base = string.length - 1;

        let ret = "";
        for (let charpos in string) {
          ret += string[base - charpos];
        }

        return ret;
      }

      function isPalindrome(string) {
        const len = string.length - 1,
              midpoint = len / 2;

        for (let charpos in string) {
          if (charpos >= midpoint) { return true; };

          if (string[charpos] == string[len - charpos]) {
            continue;
          } else {
            return false;
          }
        }
      }

      // look up once
      let input = document.querySelector('input'),
          button = document.querySelector('button'),
          infobox = document.querySelector('ul#info'),
          helpbox = document.querySelector('div#help');

      /*
      Event Handler: for input:
        *checks if the input is valid (2 or more letters, trim spaces),
         then enables (vaild input) or disables (invalid input) button.
        *TODO: Resizes input box to fit text.
      */
      input.onkeyup =
        function (keyObj) {
          this.value = this.value.trim();

          if (this.value.length < 2) {
            button.setAttribute("disabled", "true");

            infobox.children[0].innerHTML = "Input: Invalid";
            infobox.children[1].innerHTML = "isPalindrome: Need Input";
            // TODO animate helpbox, maybe use Jquery
          } else {
            button.removeAttribute("disabled");

            infobox.children[0].innerHTML = "Input: Valid";
            infobox.children[1].innerHTML = "isPalindrome: " + isPalindrome(this.value);
          }
        }

      /*
      Event Handler: for button:
        *Sets input to its content reversed
      */
      document.querySelector('button').onclick =
        function () {
          input.value = reverseString(input.value);
        }
    </script>
  </body>
</html>
